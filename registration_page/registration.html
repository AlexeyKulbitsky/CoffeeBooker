<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, width=device-width">
  
  <!-- Fixed CSS file path -->
  <link rel="stylesheet" href="./index.css">

  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Archivo:wght@600&display=swap">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <script src="https://accounts.google.com/gsi/client" async defer></script>


</head>
<body>
    

  <div class="registration-v2">
    <div class="text-20201-parent">
      <div class="text-20201">Been here before?</div>
      <a href="../login_page/login.html" class="text-20204">Log in</a>
    </div>
    <div class="textbox-725-parent">
        <div class="textbox-725">
            <div class="textfield">
                <input type="password" class="enter-at-least" placeholder="Enter at least 8+ characters" id="password">
                <button class="button visibility-toggle">
                  <img class="icon" alt="Toggle Password Visibility" src="../assets/registration/visibilityoff.png">
                </button>
              </div>
              
            <b class="password">Password</b>
          </div>
          <div class="textbox-726">
            <div class="textfield">
              <input type="email" class="enter-at-least" placeholder="example.email@gmail.com" id="email">
            </div>
            <b class="password">Email</b>
          </div>
      <button class="button-2997" id="sign-up-button">
        <div class="sign-up">Sign Up</div>
      </button>
      <div class="textbox-727">
        <div class="textfield">
          <input type="text" class="enter-at-least" placeholder="John Doe" id="username">
        </div>
        <b class="password">Full name</b>
      </div>
      <div class="text-20202">Create an account</div>
      
      
      <button class="logo-button2">
        <img class="icon" alt="Facebook" src="../assets/registration/button2998.png">
      </button>
      <button class="logo-button1" id="google-login">
        <img class="icon" alt="Google" src="../assets/registration/button2999.png">
      </button>
      <button class="logo-button3">
        <img class="icon" alt="Apple" src="../assets/registration/button3000.png">
      </button>
      <img class="image-2588-icon" alt="Background Image" src="../assets/registration/image2588.png">
    </div>
    
    
  </div>

  <script>
    function handleCredentialResponse(response) {
      console.log("Encoded JWT ID token: " + response.credential);
      // Send this token to your backend for verification and user registration
    }
  
    window.onload = function () {
      google.accounts.id.initialize({
        client_id: "814583900062-i3g8bihmongglcmahobkdaabhpu2pe7l.apps.googleusercontent.com", // Replace with your Google Client ID
        callback: handleCredentialResponse
      });
  
      window.onload = function () {
  google.accounts.id.initialize({
    client_id: "814583900062-i3g8bihmongglcmahobkdaabhpu2pe7l.apps.googleusercontent.com",
    callback: handleCredentialResponse
  });

  google.accounts.id.renderButton(
    document.getElementById("google-login"),
    { theme: "outline", size: "large" }  // Customize button
  );
};
    };

    document.getElementById("sign-up-button").addEventListener("click", function() {
         const url = 'http://127.0.0.1:5000/register'; // Replace with your API endpoint
          const payload = {
            username: document.getElementById("username").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value,
          };

          fetch(url, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json', // Specify the content type as JSON
              },
              body: JSON.stringify(payload), // Convert the payload to a JSON string
            })
              .then(response => {
                if (!response.ok) {
                  throw new Error('Network response was not ok');
                }
                return response.json(); // Parse the JSON response
              })
              .then(data => {
                console.log('Success:', data); // Handle the response data
                //window.location.href = "../mapview(tbd)/mapview.html";
              })
              .catch(error => {
                console.error('Error:', error); // Handle errors
              });
      });
  </script>

  

</body>
</html>
